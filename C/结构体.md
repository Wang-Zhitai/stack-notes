# 结构体的定义
* 结构体是一个构造类型，相当于自己创造一个数据类型，等效于int、float等等。、
```c
struct user{
	char account[16];
	char password[16];//定义时候要把每一个内部变量的数据类型都给出来。
	int numer;
};
```
* 可以用struct user u1[10] 来定义一个结构体数组
* 可以用u1={0}来初始化一个结构体,只能在一个新的结构体变量第一次定义的时候使他初始化，不能在后面的过程中用{0}来清空一个结构体变量中的数据
# 结构体字节对齐

1. 结构体中以所占内存最大的类型作为对齐单位，结构体大小为该内存单位的整数倍，如有需要，编译器会在成员之间填充若干无效字节来强制让数据对齐。即结构体的整体大小一定是内部最大字节类型的成员变量的整数倍 
2. **对齐规则：**

   * **每个成员的偏移量必须是其自身大小的整数倍**

   * **整个结构体的大小必须是最大成员大小的整数倍**
3. 对齐字节大小也跟不同类型成员变量顺序有关。当小字节成员变量后面 紧跟大字节成员变量，那么小字节会进行填充，以方便大字节成员变量 struct MemAlign { int a; 4 char b[3]; 4 int c; 4 } Mem; 更好对齐。比如short类型成员紧跟一个int型。那么short会填充2个字节 保证int型 成员变量自然对齐。 
4. 结构体的最后一个成员会负责对齐的收尾工作，也就是之前成员变量经 过对齐之后，如果不等于最大字节类型的整数倍，该成员变量就会自动 填充剩余所需字体，保证对齐。
5. 如果是数组的话，对齐是按照他自己类型的大小比如int arr[16]他的对齐大小是按照4来计算的
* 因为字节对齐，所以要从大到小书写结构体
5. 如果结构体里面还有结构体，要看里面的结构体里面的元素，而不是看里面的结构体，否则是结构体的整数倍就太大了！！！

## 举例：

```c
#include <stdio.h>
#include <stdbool.h>
#include <string.h>
struct stu1 {
	char c1;//1+3
	int i;//4
	char c2;//1+7
    double d3;//8
};// 24
struct stu2 {
	float f;//4
	char c;//1+3
	float d;//4
    int i;//4
};//16
struct stu3 {
	short i;//2
	char c1;//1+1
    int in;//4
	char c2;//1+3
};// 12
struct stu31 {
	char c1;//1
	char c2;//1
	short i;//2
    int in;//4
};// 8

struct stu4 {
	short a;//2
	short b;//2
	short c;//2
};// 6
struct demo{
	char ch1;//1+7
	double d1;//8
	float f1;//4
	short s;//2+2
};//24
struct democopy{
	double d1;//8
	float f1;//4
	short s;//2
	char ch1;//1+1
};//16
struct A {
	int  a;// 4
  	char  b;//1+3
  	double c;//8
  	char  d;//1+7
};//24
struct B {
  	double b;//8
	char  a;//1
  	char  c;//1+6
};//16
struct demo1 {
	char name[16];//16
	double d;//8
	float f;//4
	int a;//4
	short s;//2
	char ch;//1+5
};// 40
struct demo2{
	char ch;//1+1
	short s;//2
	int a;//4
	float f;//4+4
	double d;//8
};//24
struct demo3{
	char c;//1+3
	int i;//4
};//8
struct demo4{
	int i;//4
	float c;//4
	double d;//8
};//16
int main(){

	printf("stu1:%ld\n",sizeof(struct stu1));//24
	printf("stu2:%ld\n",sizeof(struct stu2));//16
	printf("stu3:%ld\n",sizeof(struct stu3));//12
	printf("stu31:%ld\n",sizeof(struct stu31));//8
	printf("stu4:%ld\n",sizeof(struct stu4));//6
	printf("demo:%ld\n",sizeof(struct demo));//24
	printf("democpy:%ld\n",sizeof(struct democopy));//16
	printf("A:%ld\n",sizeof(struct A));//24
	printf("B:%ld\n",sizeof(struct B));//16
	printf("demo1:%ld\n",sizeof(struct demo1));//40
	printf("demo2:%ld\n",sizeof(struct demo2));//24
	printf("demo3:%ld\n",sizeof(struct demo3));//8
	printf("demo4:%ld\n",sizeof(struct demo4));//16
    return 0;
}
```

